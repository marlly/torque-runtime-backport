<?xml version="1.0"?>

<document>

  <properties>
    <title>Torque Developer's Guide</title>
    <author email="jvanzyl@apache.org">Jason van Zyl</author>
    <author email="jmcnally@collab.net">John McNally</author>
    <author email="mpoeschl@marmot.at">Martin Poeschl</author>
    <author email="seade@backstagetech.com.au">Scott Eade</author>
  </properties>

  <body>

    <section name="Torque Directory Structure">

      <p>
        Here is what the Torque directory structure looks like in CVS:
      </p>

      <source><![CDATA[
    db-torque/
      examples/        <--- example schema and config files
      profile/         <--- testing profiles
      src/             <--- sources
        conf/          <--- runtime configuration
        generator/     <--- home of torque-gen
          src/         <--- sources
            conf/      <--- generator configuration and ant buildfile
            dtd/       <--- DTD for schema.xml files
            java/      <--- java sources for generator
            schema/    <--- needed schema files (IDBroker)
            templates/ <--- templates for sql- and om- generation
            test/      <--- junit tests
          xdocs/       <--- docs for generator in anakia xml format
        java/          <--- java sources for runtime
        maven-plugin   <--- home of maven-plugin
          xdocs/       <--- docs for maven-plugin in anakia xml format
        rttest/        <--- sources for the runtime tests
        test/          <--- junit tests
      xdocs/           <--- docs for runtime in anakia xml format
      ]]></source>
    </section>

    <section name="Building">
      <p>
        The Torque build process uses
        <a href="http://maven.apache.org">Maven</a>.  Before you begin, you'll 
        need to check out the <code>db-torque</code> CVS repository (if you are 
        not familiar with the Apache CVS repositories, please refer to the
        <a href="http://www.apache.org/dev/version-control.html">documentation</a>).
        Specific information for Torque is available on the 
        <a href="cvs-usage.html">Source Repository</a> page.
      </p>
      <p>
        To build the Torque generator jar execute <code>maven jar:jar</code> in 
        the <code>src/generator</code> directory (<code>maven 
        jar:install</code> to install a copy of the jar in your local Maven 
        repository).
      </p>
      <p>
        To build and install the Torque maven-plugin execute <code>maven 
        plugin:install</code> in the <code>src/maven-plugin</code> directory.
      </p>
      <p>
        To build the Torque runtime jar execute <code>maven jar:jar</code> in 
        the root directory of the project (<code>maven jar:install</code> to
        install a copy of the jar in your local Maven repository).
      </p>
    </section>

    <section name="Testing">
      <p>
        You must define a profile in your <code>${user.home}/build.properties
        </code> file
      </p>

      <source><![CDATA[
    torque.testProfile=profile/oracle.profile
      ]]></source>

      <p>
        Edit the profile to match your database settings. To start the runtime
        tests simply type:
      </p>

      <source><![CDATA[
    maven runtime:test
      ]]></source>

      <p>
        Please report any problems to the 
        <a href="mailto:torque-dev@db.apache.org">torque-dev</a> mailing list.
      </p>

    </section>

  </body>
</document>
