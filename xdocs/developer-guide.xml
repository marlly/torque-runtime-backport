<?xml version="1.0"?>

<document>

  <properties>
    <title>Torque Developer's Guide</title>
    <author email="jvanzyl@apache.org">Jason van Zyl</author>
    <author email="jmcnally@collab.net">John McNally</author>
    <author email="mpoeschl@marmot.at">Martin Poeschl</author>
  </properties>

  <body>

    <section name="Torque Directory Structure">

      <p>
        Here is what the Torque directory structure looks like in CVS:
      </p>

      <source><![CDATA[
    jakarta-turbine-torque/
      bin/            <--- directory for building the project
      docs/           <--- directory where docs are generated
      examples/       <--- example schema and config files
      profile/        <--- testing profiles
      src/            <--- sources
        conf/         <--- runtime configuration
        dtd/          <--- DTD for schema.xml files
        java/         <--- java sources
        rttest/       <--- sources for the runtime tests
        schema/       <--- needed schema files (IDBroker)
        templates/    <--- templates for sql- and om- generation
        test/         <--- junit tests
      xdocs/          <--- docs in anakia xml format
      ]]></source>
    </section>


    <section name="Building">
      <p>
        You must set the following properties in either your <code>
        ${user.home}/build.properties</code> file, or a <code>build.properties
        </code> file added by you to the Torque top-level directory:
      </p>
      <source><![CDATA[
    velocity.jar
    logkit.jar
    xerces.jar
    village.jar
    log4j.jar
      ]]></source>

      <p>
        Alternately, you can set the property <code>lib.repo</code> to the
        directory acting as a repository holding the JARs named by
        <code>default.properties</code>.
      </p>

      <p>
        Torque uses <a href="http://jakarta.apache.org/velocity">Velocity</a> to
        generate the OM sources, and Torque XML schema parsing requires
        <a href="http://xml.apache.org/xerces-j">Xerces</a>. We will soon move
        to using the Digester to parse the XML schema, and at that point any SAX
        parser will be sufficient.
      </p>

      <p>
        <a href="http://share.whichever.com/index.php?SCREEN=village">Village
        </a> is required to build the distribution. Village isn't needed for
        building, but the generated classes are dependent on Village.
      </p>

      <p>
        <a href="http://jakarta.apache.org/log4j">Log4j</a> is required for
        logging in Torque.
      </p>

    </section>

    <section name="Testing">
      <p>
        You must define a profile in your <code>${user.home}/build.properties
        </code> file
      </p>

      <source><![CDATA[
    torque.testProfile=profile/oracle.profile
      ]]></source>

      <p>
        Edit the profile to match your database settings. To start the runtime
        tests simply type:
      </p>

      <source><![CDATA[
    ant test
      ]]></source>

      <p>
        Please report any problems to the turbine-dev mailing list.
      </p>

    </section>

  </body>
</document>
