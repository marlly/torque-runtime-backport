#set ( $database = $dataModel.database )

<?xml version="1.0" encoding="UTF-8"?>

<!-- defining entities for include-files -->
<!DOCTYPE descriptor-repository SYSTEM "repository.dtd" [
<!ENTITY internal SYSTEM "repository_internal.xml">
#foreach ($dataModel in $dataModels)
<!ENTITY $dataModel.shortName SYSTEM "repository_${dataModel.shortName}.xml">
#end
]>

<descriptor-repository isolation-level="read-uncommitted">
<!-- The Default JDBC Connection. If a Class does not specify its own JDBC Connection,
     the Connection specified here will be used. -->

  <jdbc-connection-descriptor id="default"
    platform="${ojb.platform}"
    jdbc-level="${jdbcLevel}"
  #if (${ojb.useJNDI} == "true")
    jndi-datasource-name="${ojb.JNDISource}"
  #else
    driver="${databaseDriver}"
    protocol="jdbc"
    subprotocol="${database}"
    dbalias="${databaseName}"
  #end
    username="${databaseUser}"
    password="$!{databasePassword}"
  >


  <!-- include mappings here -->
#foreach ($dataModel in $dataModels)
  &${dataModel.shortName};
#end

  <!-- include internal mappings here -->
  &internal;
</descriptor-repository>


