<?xml version="1.0" encoding="ISO-8859-1" standalone="no" ?>
<!DOCTYPE database SYSTEM "http://db.apache.org/torque/dtd/database_3_1.dtd">


<database 
  name="@DATABASE_DEFAULT@" 
  defaultIdMethod="@DATABASE_ID_METHOD@">

  <!-- =================================================== -->
  <!-- B O O K  T A B L E                                  -->
  <!-- =================================================== -->

  <table name="book" description="Book table">
    <column
      name="book_id"
      required="true"
      primaryKey="true"
      type="INTEGER"
      description="Book Id"
    />
    <column
      name="isbn"
      required="true"
      type="VARCHAR"
      size="15"
      description="ISBN"
    />
    <column
      name="author_id"
      required="true"
      type="INTEGER"
      description="Foreign Key Author"
    />
    <column
      name="title"
      required="true"
      type="VARCHAR"
      size="255"
      description="Book Title"
    />

    <foreign-key foreignTable="author">
      <reference local="author_id" foreign="author_id"/>
    </foreign-key>

  </table>


  <!-- =================================================== -->
  <!-- A U T H O R  T A B L E                              -->
  <!-- =================================================== -->

  <table name="author" description="Author table">
    <column
      name="author_id"
      required="true"
      primaryKey="true"
      type="INTEGER"
    />
    <column
      name="name"
      required="true"
      type="VARCHAR"
      size="50"
    />

  </table>



  <!-- =================================================== -->
  <!-- A  T A B L E                                        -->
  <!-- =================================================== -->

  <table name="a" description="A table">
    <column
      name="a_id"
      required="true"
      primaryKey="true"
      type="INTEGER"
    />
    <column
      name="name"
      required="true"
      type="VARCHAR"
      size="50"
    />

  </table>

  <!-- =================================================== -->
  <!-- B  T A B L E                                        -->
  <!-- =================================================== -->

  <table name="b" description="B table">
    <column
      name="b_id"
      required="true"
      primaryKey="true"
      type="INTEGER"
    />
    <column
      name="name"
      required="true"
      type="VARCHAR"
      size="50"
    />

  </table>


  <!-- =================================================== -->
  <!-- AB  T A B L E                                       -->
  <!-- =================================================== -->

  <table name="r_ab" description="r_ab table" idMethod="none">
    <column
      name="a_id"
      required="true"
      primaryKey="true"
      type="INTEGER"
    />
    <column
      name="b_id"
      required="true"
      primaryKey="true"
      type="INTEGER"
    />
    <column
      name="name"
      required="true"
      type="VARCHAR"
      size="50"
    />

    <foreign-key foreignTable="a">
      <reference local="a_id" foreign="a_id"/>
    </foreign-key>

    <foreign-key foreignTable="b">
      <reference local="b_id" foreign="b_id"/>
    </foreign-key>

  </table>

  <!-- =================================================== -->
  <!-- C  T A B L E                                       -->
  <!-- =================================================== -->

  <table name="c" description="c table contains fk to r_ab and to b">
    <column
      name="c_id"
      required="true"
      primaryKey="true"
      type="INTEGER"
    />
    <column
      name="a_id"
      required="true"
      type="INTEGER"
    />
    <column
      name="b_id"
      required="true"
      type="INTEGER"
    />
    <column
      name="name"
      required="true"
      type="VARCHAR"
      size="50"
    />

    <foreign-key foreignTable="r_ab">
      <reference local="a_id" foreign="a_id"/>
      <reference local="b_id" foreign="b_id"/>
    </foreign-key>

    <foreign-key foreignTable="b">
      <reference local="b_id" foreign="b_id"/>
    </foreign-key>

  </table>


  <table name="d">
    <column name="d_id" required="true"
            primaryKey="true" type="INTEGER"/>
    <column name="name" required="true" size="255" type="VARCHAR"/>
    <column name="b_id" primaryKey="true" required="true" type="INTEGER"/>
    <column name="a_id" primaryKey="true" required="true" type="INTEGER"/>
    <foreign-key foreignTable="a">
        <reference local="a_id" foreign="a_id"/>
    </foreign-key>
    <foreign-key foreignTable="r_ab">
        <reference local="a_id" foreign="a_id"/>
        <reference local="b_id" foreign="b_id"/>
    </foreign-key>
  </table>


  <!-- =================================================== -->
  <!-- N O P K  T A B L E                                  -->
  <!-- =================================================== -->

  <table name="nopk" idMethod="none" description="this table has no pk">
    <column
      name="intcol"
      type="INTEGER"
    />
    <column
      name="name"
      type="VARCHAR"
      size="50"
    />
  </table>

  <table name="MULTIPK_SELF_REFTABLE">
    <column name="COL1" primaryKey="true" required="true" type="DECIMAL"/>
    <column name="COL2" primaryKey="true" required="true" type="DECIMAL"/>
            
    <column name="PARENT_COL1" required="true" type="DECIMAL"/>
    <column name="PARENT_COL2" required="true" type="DECIMAL"/>
            
    <foreign-key foreignTable="MULTIPK_SELF_REFTABLE">
      <reference foreign="COL1" local="PARENT_COL1"/>
      <reference foreign="COL2" local="PARENT_COL2"/>
    </foreign-key>
  </table>

</database>
