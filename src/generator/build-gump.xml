<project name="maven" default="jar" basedir=".">

  <target
    name="jar">

    <property name="build.dir" value="target"/>
    <property name="build.dest" value="${maven.build.dir}/classes"/>

    <mkdir dir="${maven.build.dest}"/>

    <javac
      destdir="${maven.build.dest}"
      excludes="**/package.html"
      debug="false"
      deprecation="false"
      optimize="false">
      <src>
         <pathelement location="src/java"/>
      </src>
    </javac>

    <!-- copy database.dtd to the right place -->
    <copy file="src/dtd/database.dtd"
          todir="${maven.build.dest}/org/apache/torque/engine/database/transform"/>
    <!-- copy default.properties to the right place -->
    <copy file="src/conf/default.properties"
          todir="${maven.build.dest}/org/apache/torque"/>

    <!-- build the jar incl. the templates -->
    <jar jarfile="${maven.build.dir}/${maven.final.name}.jar">
      <fileset dir="${maven.build.dest}" excludes="**/package.html"/>
      <fileset dir="src/templates"/>
    </jar>
  </target>

</project>
